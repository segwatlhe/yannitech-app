{"ast":null,"code":"import { throwError } from 'rxjs';\nimport { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/notification.service\";\nimport * as i2 from \"../service/book.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\n\nfunction CreateBookComponent_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1, \" Category is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateBookComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1, \" Title is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateBookComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1, \" Year is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateBookComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1, \" Price is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let CreateBookComponent = /*#__PURE__*/(() => {\n  class CreateBookComponent {\n    constructor(notifyService, bookService, router, fb) {\n      this.notifyService = notifyService;\n      this.bookService = bookService;\n      this.router = router;\n      this.fb = fb;\n    }\n\n    ngOnInit() {\n      this.buildRegistrationFrom();\n      let promise = new Promise((resolve, reject) => {\n        resolve(\"Promise Resolved\");\n      });\n      let promise2 = new Promise((resolve, reject) => {\n        resolve(\"Promise Resolved\");\n      }).then(sucess => {\n        console.log(sucess);\n      }).catch(function (error) {\n        console.log(error);\n      }).finally(() => {\n        console.log('finally');\n      });\n    }\n\n    buildRegistrationFrom() {\n      this.bookForm = this.fb.group({\n        category: new FormControl('', Validators.required),\n        title: new FormControl('', [Validators.required]),\n        year: new FormControl('', [Validators.maxLength(4)]),\n        price: new FormControl('', [Validators.required])\n      });\n    }\n\n    save() {\n      if (this.bookForm.valid) {\n        this.bookService.createBook(this.bookForm.value).subscribe({\n          next: res => {\n            this.gotoList();\n            this.notifyService.showSuccess('Book save successful', 'Yannitech BookStore');\n          },\n          error: error => {\n            this.handleError(error);\n            this.notifyService.showError('Book save unsuccessful', 'Yannitech BookStore');\n          },\n          complete: () => {\n            console.log('complete');\n          }\n        });\n      } else {\n        this.notifyService.showError('Form not valid', 'Yannitech BookStore');\n      }\n    } // routing\n\n\n    gotoList() {\n      this.router.navigate(['/books']);\n    } // error handling\n\n\n    handleError(error) {\n      let errorMessage = '';\n\n      if (error.error instanceof ErrorEvent) {\n        // client-side error\n        errorMessage = `Error: ${error.error.message}`;\n        console.log('client-side error ' + errorMessage);\n      } else {\n        // server-side error\n        errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\n        console.log('server-side error ' + errorMessage);\n      }\n\n      console.log(errorMessage);\n      return throwError(() => errorMessage);\n    }\n\n  }\n\n  CreateBookComponent.ɵfac = function CreateBookComponent_Factory(t) {\n    return new (t || CreateBookComponent)(i0.ɵɵdirectiveInject(i1.NotificationService), i0.ɵɵdirectiveInject(i2.BookService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.FormBuilder));\n  };\n\n  CreateBookComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateBookComponent,\n    selectors: [[\"app-create-book\"]],\n    decls: 32,\n    vars: 5,\n    consts: [[3, \"formGroup\"], [1, \"form-group\", \"input-group\"], [1, \"input-group-prepend\"], [1, \"input-group-text\"], [\"autocomplete\", \"off\", \"formControlName\", \"category\", \"id\", \"category\", \"name\", \"category\", \"placeholder\", \"Category\", \"required\", \"\", \"type\", \"text\", 1, \"form-control\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"autocomplete\", \"off\", \"formControlName\", \"title\", \"id\", \"title\", \"name\", \"title\", \"placeholder\", \"Title\", \"required\", \"\", \"required\", \"\", \"type\", \"text\", 1, \"form-control\"], [\"autocomplete\", \"off\", \"formControlName\", \"year\", \"id\", \"year\", \"name\", \"year\", \"placeholder\", \"Year\", \"required\", \"\", \"required\", \"\", \"type\", \"text\", 1, \"form-control\"], [\"autocomplete\", \"off\", \"formControlName\", \"price\", \"id\", \"price\", \"name\", \"price\", \"placeholder\", \"Price\", \"required\", \"true\", \"required\", \"\", \"type\", \"number\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 2, \"margin-left\", \"10px\", 3, \"click\"], [1, \"btn\", \"btn-warning\", 2, \"margin-left\", \"10px\", 3, \"click\"], [1, \"text-danger\"]],\n    template: function CreateBookComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\");\n        i0.ɵɵtext(1, \"Create Book\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"form\", 0)(3, \"div\", 1)(4, \"div\", 2)(5, \"span\", 3);\n        i0.ɵɵtext(6, \"Category\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(7, \"input\", 4);\n        i0.ɵɵtemplate(8, CreateBookComponent_span_8_Template, 2, 0, \"span\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 1)(10, \"div\", 2)(11, \"span\", 3);\n        i0.ɵɵtext(12, \"Title\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(13, \"input\", 6);\n        i0.ɵɵtemplate(14, CreateBookComponent_span_14_Template, 2, 0, \"span\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 1)(16, \"div\", 2)(17, \"span\", 3);\n        i0.ɵɵtext(18, \"Year\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(19, \"input\", 7);\n        i0.ɵɵtemplate(20, CreateBookComponent_span_20_Template, 2, 0, \"span\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 1)(22, \"div\", 2)(23, \"span\", 3);\n        i0.ɵɵtext(24, \"Price\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(25, \"input\", 8);\n        i0.ɵɵtemplate(26, CreateBookComponent_span_26_Template, 2, 0, \"span\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function CreateBookComponent_Template_button_click_27_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵtext(28, \"Submit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function CreateBookComponent_Template_button_click_29_listener() {\n          return ctx.gotoList();\n        });\n        i0.ɵɵtext(30, \"Back\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"br\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.bookForm);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.bookForm.get(\"category\").touched && (ctx.bookForm.get(\"category\").errors == null ? null : ctx.bookForm.get(\"category\").errors.required));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.bookForm.get(\"title\").touched && (ctx.bookForm.get(\"title\").errors == null ? null : ctx.bookForm.get(\"title\").errors.required));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.bookForm.get(\"year\").touched && (ctx.bookForm.get(\"year\").errors == null ? null : ctx.bookForm.get(\"year\").errors.required));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.bookForm.get(\"price\").touched && (ctx.bookForm.get(\"price\").errors == null ? null : ctx.bookForm.get(\"price\").errors.required));\n      }\n    },\n    dependencies: [i5.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName]\n  });\n  return CreateBookComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}